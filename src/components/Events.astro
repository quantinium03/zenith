<section id="events" class="relative pt-5 pb-12 md:pb-16 z-20">
    <div>
        <h1 class="text-4xl lg:text-6xl font-bold underline text-center mb-8">
            HACKATHON EVENTS
        </h1>
    </div>

    <div class="flex w-[90vw] mx-auto overflow-x-auto md:overflow-x-hidden snap-x snap-mandatory scrollbar-hide">
        <div class="panel transition-all duration-700 ease-in bg-cover bg-center bg-no-repeat h-[50vh] md:h-[50vh] text-white cursor-pointer flex-[0.5] md:flex-[0.5] max-w-[85vw] sm:max-w-[70vw] m-[10px] relative active border border-zinc-600 shadow-xl rounded-lg overflow-hidden" style="background-image: url('/events/hackathon.jpeg');">
            <div class="absolute inset-0 bg-black/50 z-0"></div>
            <div class="relative flex flex-col h-full w-full p-5 z-10">
                <div class="text-center mb-4 md:mb-6">
                    <h3 class="text-shadow text-2xl md:text-4xl m-0 opacity-0 md:opacity-0 font-bold">
                        ZENITH 4.0
                    </h3>
                    <h3 class="text-shadow text-2xl md:text-4xl m-0 opacity-0 md:opacity-0 font-bold mt-2">
                        A 24HR HACKATHON
                    </h3>
                </div>
                <div class="flex-grow">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 w-full lg:w-3/4">
                        Dive into the ultimate coding marathon where creativity meets resilience. Build, innovate, and showcase your solutions to real-world challenges.
                    </p>
                </div>
                <div class="mt-auto">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 mb-2">- Exciting Prices</p>
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0">- Teamwork and Networking</p>
                </div>
            </div>
        </div>
        <div class="panel transition-all duration-700 ease-in bg-cover bg-center bg-no-repeat h-[50vh] md:h-[50vh] text-white cursor-pointer flex-[0.5] md:flex-[0.5] max-w-[85vw] m-[10px] relative border border-zinc-600 shadow-xl rounded-lg overflow-hidden" style="background-image: url('https://static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/02/rust-code-that-interacts-with-files-1.jpg?q=50&fit=crop&w=1140&h=&dpr=1.5');">
            <div class="absolute inset-0 bg-black/50 z-0"></div>
            <div class="relative flex flex-col h-full w-full p-5 z-10">
                <div class="text-center mb-4 md:mb-6">
                    <h3 class="text-shadow text-2xl md:text-4xl m-0 opacity-0 md:opacity-0 font-bold">
                        CODE CADET XVI
                    </h3>
                </div>
                <div class="flex-grow">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 w-full lg:w-3/4">
                        CodeCadet is the perfect platform for coders to push their limits, test their skills, and engage in the thrilling competition. In CodeCadet, Manan brings you an offline coding challenge like no other.
                    </p>
                </div>
                <div class="mt-auto">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 mb-2">- Exciting Goodies</p>
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0">- 2hr Long Contest</p>
                </div>
            </div>
        </div>
        <div class="panel transition-all duration-700 ease-in bg-cover bg-center bg-no-repeat h-[50vh] md:h-[50vh] text-white cursor-pointer flex-[0.5] md:flex-[0.5] max-w-[85vw] m-[10px] relative border border-zinc-600 shadow-xl rounded-lg overflow-hidden" style="background-image: url('/events/tech_and_beyond.jpeg');">
            <div class="absolute inset-0 bg-black/50 z-0"></div>
            <div class="relative flex flex-col h-full w-full p-5 z-10">
                <div class="text-center mb-4 md:mb-6">
                    <h3 class="text-shadow text-2xl md:text-4xl m-0 opacity-0 md:opacity-0 font-bold">
                        TECH AND BEYOND
                    </h3>
                </div>
                <div class="flex-grow">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 w-full lg:w-3/4">
                        Join us for an exciting and an informative session !! Explore about different technical domains from industry experts to take your technical mindset to the next level!
                    </p>
                </div>
                <div class="mt-auto">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 mb-2">- 500+ Active Listeners</p>
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0">- Q&A session</p>
                </div>
            </div>
        </div>
        <div class="panel transition-all duration-700 ease-in bg-cover bg-center bg-no-repeat h-[50vh] md:h-[50vh] text-white cursor-pointer flex-[0.5] md:flex-[0.5] max-w-[85vw] m-[10px] relative border border-zinc-600 shadow-xl rounded-lg overflow-hidden" style="background-image: url('/events/xunbao.jpeg');">
            <div class="absolute inset-0 bg-black/50 z-0"></div>
            <div class="relative flex flex-col h-full w-full p-5 z-10">
                <div class="text-center mb-4 md:mb-6">
                    <h3 class="text-shadow text-2xl md:text-4xl m-0 opacity-0 md:opacity-0 font-bold">
                        XUNBAO - ONLINE QUIZ
                    </h3>
                </div>
                <div class="flex-grow">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0 w-full lg:w-3/4">
                        Xunbao is our annual quizzing event that fuses pop culture with technology in mindbending ways. From viral memes to cutting-edge tech, it's a hunt for the sharpest minds and the fastest thinkers
                    </p>
                </div>
                <div class="mt-auto">
                    <p class="text-shadow text-lg md:text-2xl opacity-0 md:opacity-0">- Exciting Goodies</p>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.text-shadow {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
}

/* Desktop panel behavior */
@media (min-width: 769px) {
    .panel {
        flex: 0.5;
        transition: all 0.7s ease-in;
    }
    
    .panel.active {
        flex: 5;
    }
    
    .panel.active h3,
    .panel.active p,
    .panel.active div p {
        opacity: 1 !important;
        transition: opacity 0.3s ease-in 0.4s;
    }
}

/* Mobile panel behavior */
@media (max-width: 768px) {
    .panel {
        flex: 1 0 auto;
        scroll-snap-align: center;
    }
    
    .panel h3,
    .panel p,
    .panel div p {
        opacity: 1 !important; /* Always visible on mobile */
    }
    
    .panel h3 {
        font-size: 1.5rem;
    }
    
    .panel p {
        font-size: 1rem;
    }
    
    /* Container snap scroll behavior */
    .flex {
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 10px; /* Add space for scrollbar */
    }
}

.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const panels = document.querySelectorAll('.panel');
    const isMobile = window.innerWidth <= 768;
    
    // Only apply click handlers on desktop
    if (!isMobile) {
        panels.forEach(panel => {
            panel.addEventListener('click', () => {
                removeActiveClasses();
                panel.classList.add('active');
            });
        });
        
        // Set the first panel as active on desktop
        panels[0].classList.add('active');
    } else {
        // On mobile, make all panels visible with content
        panels.forEach(panel => {
            // Remove any desktop active class handling
            panel.classList.remove('active');
            
            // Make all content visible
            const contentElements = panel.querySelectorAll('h3, p');
            contentElements.forEach(el => {
                el.style.opacity = '1';
            });
        });
        
        // Add pagination indicators for mobile
        const container = document.querySelector('.flex');
        const paginationContainer = document.createElement('div');
        paginationContainer.className = 'pagination flex justify-center mt-4 gap-2';
        
        panels.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.className = 'h-2 w-2 rounded-full bg-gray-400';
            if (index === 0) dot.classList.add('bg-white');
            paginationContainer.appendChild(dot);
        });
        
        container.parentNode.insertBefore(paginationContainer, container.nextSibling);
        
        // Update pagination on scroll
        container.addEventListener('scroll', function() {
            const scrollPosition = container.scrollLeft;
            const panelWidth = panels[0].offsetWidth;
            const currentIndex = Math.round(scrollPosition / panelWidth);
            
            const dots = document.querySelectorAll('.pagination div');
            dots.forEach((dot, index) => {
                if (index === currentIndex) {
                    dot.classList.remove('bg-gray-400');
                    dot.classList.add('bg-white');
                } else {
                    dot.classList.remove('bg-white');
                    dot.classList.add('bg-gray-400');
                }
            });
        });
    }
    
    function removeActiveClasses() {
        panels.forEach(panel => {
            panel.classList.remove('active');
        });
    }
    
    // Handle resize events
    window.addEventListener('resize', function() {
        const newIsMobile = window.innerWidth <= 768;
        
        // If changed between mobile/desktop
        if (newIsMobile !== isMobile) {
            location.reload(); // Refresh to apply correct layout
        }
    });
});
</script>
